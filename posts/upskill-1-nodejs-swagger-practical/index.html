<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Upskill 1 (Nodejs &#43; Swagger): Practical | Kenywil Tiu Blog</title>
<meta name="keywords" content="upskill, full stack, nodejs, expressjs, swagger, javascript, github">
<meta name="description" content="Upskill 1: Practical research on backend Javascript framework NodeJS with Swagger">
<meta name="author" content="Kenywil Tiu">
<link rel="canonical" href="https://www.kenywil.com/posts/upskill-1-nodejs-swagger-practical/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css" integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js" integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.kenywil.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.kenywil.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.kenywil.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.kenywil.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.kenywil.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Upskill 1 (Nodejs &#43; Swagger): Practical" />
<meta property="og:description" content="Upskill 1: Practical research on backend Javascript framework NodeJS with Swagger" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.kenywil.com/posts/upskill-1-nodejs-swagger-practical/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-07T11:41:55&#43;08:00" />
<meta property="article:modified_time" content="2022-05-07T11:41:55&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Upskill 1 (Nodejs &#43; Swagger): Practical"/>
<meta name="twitter:description" content="Upskill 1: Practical research on backend Javascript framework NodeJS with Swagger"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.kenywil.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Upskill 1 (Nodejs + Swagger): Practical",
      "item": "https://www.kenywil.com/posts/upskill-1-nodejs-swagger-practical/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Upskill 1 (Nodejs + Swagger): Practical",
  "name": "Upskill 1 (Nodejs \u002b Swagger): Practical",
  "description": "Upskill 1: Practical research on backend Javascript framework NodeJS with Swagger",
  "keywords": [
    "upskill", "full stack", "nodejs", "expressjs", "swagger", "javascript", "github"
  ],
  "articleBody": "Introduction  I have done some research on NodeJS with Swagger, and some crash course practical developement. I personally think I learn better by coding step by step, so for this blog I’ll follow and break down this Youtube Video called “NodeJS Swagger API Documentation Tutorial Using Swagger JSDoc” By Maksim Ivanov.\nSteps Prerequisite  Github account Git NodeJS VSCode  Github setup  Created a repository here by using GitHub’s website UI. Cloned to my local machine by using the following code  git clone https://github.com/tiukenywil11/node-express-swagger-crud.git Navigated in and opened the directory on VSCode.  cd node-express-swagger-crud code . Initialize project  Initialize Node project.  npm init Just used default configurations. Install dependencies   express: Used as server. lowdb: Used to store data. morgan: Output the logs. nanoid: Create unique ids. cors: To setup cross origins policy. swagger-jsdoc: JS docs syntax. swagger-ui-express: To serve as swagger ui specifications  npm install express lowdb@1.0.0 morgan nanoid cors swagger-jsdoc swagger-ui-express Create the server  Create and append ‘index.js’.  touch index.js  Import the required libraries  const express = require(\"express\"); const cors = require(\"cors\"); const morgan = require(\"morgan\"); const low = require(\"lowdb\");  Initialize port to get from the environment variable, or set it to ‘4000’.  const PORT = process.env.PORT || 4000;  Link data to the file ‘db.json’  const FileSync = require(\"lowdb/adapters/FileSync\");  const adapter = new FileSync(\"db.json\"); const db = low(adapter);  Add default characters to db.  db.defaults({ books: []}).write()  Initilialize ExpressJS.  const app = express();  Set ExpressJS DB.  app.db = db;  Initialize CORS, ExpressJS JSON library, and Morgan.  app.use(cors()); app.use(express.json()); app.use(morgan(\"dev\"));  Create server listener.  app.listen(PORT, () = console.log(`The service is running on port ${PORT}`)); Test the server.  node index.js  Should show the following message.  The service is running on port 4000  Accessing via http://localhost:4000/ would show the following message.  Cannot GET / Error encountered:\n lowdb 3.0.0 (ERR_REQUIRE_ESM).  Reason: Version incompatible with node^16.13.1 Solution: Downgraded to lowdb^1.0.0    Committed changes in the repository.  git add . git commit -m \"Part 1: Creating a server\" git push  First Commit: Working node-express server.  Create Routes  Create ‘routes’ directory.  mkdir routes Create and append’routes/books.js’ file.  touch routes/books.js  Import the required libraries.  const express = require(\"express\"); const router = express.Router(); const { nanoid } = require(\"nanoid\");  Initilialize ID length.  const idLength = 8;  Define books route.  Note: ‘app.db’ is initialized on ‘index.js’   Create ‘GET’ books array.  router.get(\"/\", (req, res) = { \tconst books = req.app.db.get(\"books\"); \t// sends a response which are 'books' \tres.send(books); })  Create ‘GET’ for a single entry.  router.get(\"/:id\", (req, res) = { \tconst book = req.app.db.get(\"books\").find({ id: req.params.id }).value(); \tres.send(book); })  Create ‘POST’ to add to the book array.  router.post(\"/\", (req, res) = { \ttry { \tconst book = { \tid: nanoid(idLength), \t// This should be expounded on real projects. \t...req.body \t}; \treq.app.db.get(\"books\").push(book).write(); \t} catch(error) { \treturn res.status(500).send(error); \t} })  Create ‘PUT’ to append an entry.  router.put(\"/:id\", (req, res) = { \ttry { \treq.app.db.get(\"books\").find({ id: req.params.id }).assign(req.body).write();\t\tres.send(req.app.db.get(\"books\").find({ id:req.params.id })); \t} catch(error) { \treturn res.status(500).send(error); \t} })  Create ‘DELETE’ to remove an entry.  router.delete(\"/:id\", (req, res) = { \treq.app.db.get(\"books\").remove({ id: req.params.id }).write(); \tres.sendStatus(200); })  Export the routes.  module.exports = router; Add routes to ‘index.js’.   Import booksRouter. Ideally placed together with other imports.  const booksRouter = require('./routes/books');  Initialize books router. Should be placed before ‘app.listen’  app.use(\"/books\",booksRouter); Added test data to ‘db.json’ for a quick test.  {  \"books\": [  {  \"id\": \"123456\",  \"name\": \"Book\",  }  ] } Test the server.  node index.js  Should show the following message.  The service is running on port 4000  Accessing via http://localhost:4000/ would show the following message.  Cannot GET /  Accessing via http://localhost:4000/books would show the following message.  [{\"id\":\"123456\"}] Committed changes in the repository.  git add . git commit -m \"Part 2: Create routes\" git push  Second Commit: Routes are connected to ‘index.js’, test with GET successful.  Adding SwaggerUI  Append ‘index.js’.   Import swagger. Ideally placed together with other imports.  const swaggerUI = require(\"swagger-ui-express\"); const swaggerJsDoc = require(\"swagger-jsdoc\");  Create options for swagger, placed under ‘db.defaults’  const options = { \tdefinition: { \topenapi: \"3.0.0\", \tinfo: { \ttitle: \"Library API\", \tversion: \"1.0.0\", \tdescription: \"A simple Express Library API\" \t}, \tservers: [{ \turl: \"http://localhost:4000\" \t}], \t}, \tapis: [\"./routes/*.js\"], };  Initialize swagger js docs, under swagger options.  const specs = swaggerJsDoc(options);  Use the API docs, placed after instantiation of express to variable app.  app.use(\"/api-docs\", swaggerUI.serve, swaggerUI.setup(specs)); Test the server.  node index.js  Should show the following message.  The service is running on port 4000  Accessing via http://localhost:4000/api-docs would show the following.   Committed changes in the repository.  git add . git commit -m \"Part 3: Added base Swagger\" git push  Third Commit: Added base Swagger JS.  Adding Schemas for books Additional Swagger resource regarding component specification can be found here\n Append’routes/books.js’ file.   Add swagger definition after initializing ID length.  /** * @swagger * components: * schemas: * Book: * type: object * required: * - title * - author * properties: * id: * type: string * description: The auto-generated id of the book * title: * type: string * description: The book title * author: * type: string * description: The book author * example: * id: 123456 * title: Book * author: Aut H. Or */ Error encountered:\n Swagger ‘component’ not showing.  Reason: Javascript option apis: [\"*./routes/*.js\"] on ‘index.js’ is a typo. Solution: Appended to the following apis: [\"./routes/*.js\"], Notes:   Also appended ‘db.json’ test data from:  {  \"books\": [  {  \"id\": \"123456\",  \"name\": \"book\",  }  ] } to the following:\n{  \"books\": [  {  \"id\": \"12345678\",  \"title\": \"Book\",  \"author\": \"Aut H. Or\"  }  ] }  Accessing via http://localhost:4000/api-docs would show the following.  Create a swagger tag, to grpup all ‘books’/   /** * @swagger * tags: * name: Books * description: The books managing API */  Accessing via http://localhost:4000/api-docs would show the following.  Add Swagger for ‘GET’ route. Placed above the ‘router.get’.  /** * @swagger * /books: * get: * summary: Returns the list of all the books * tags: [Books] * responses: * 200: * description: The list of the books * content: * application/json: * schema: * type: array * items: * $ref: '#/components/schemas/Book' */  Accessing via http://localhost:4000/api-docs would show the following. You can also click “Try it out”, to test the API endpoint.  These images are similar to the other routes.    Add Swagger for ‘GET’ for a single entry. Placed above the ‘router.get’ that gets a single entry.  /** * @swagger * /books/{id}: * get: * summary: Get the book by id * tags: [Books] * parameters: * - in: path * name: id * schema: * type: string * required: true * description: The book id * responses: * 200: * description: The book description by id * contens: * application/json: * schema: * $ref: '#/components/schemas/Book' * 404: * description: The book was not found */  Add error 404 for ‘GET’ for single entry. This is placed inside router.get, and after book variable is initialized.  if(!book) { \tres.sendStatus(404); }  Error Encountered:  ‘GET’ with {:id} not returning the a value: Reason: Wrong variable is passed backed tores.send(books); Solution: Appended to the following res.send(book);   Add Swagger for ‘POST’ route. Placed above the ‘router.post’ function.  /** * @swagger * /books: * post: * summary: Create a new book * tags: [Books] * requestBody: * required: true * content: * application/json: * schema: * $ref: '#/components/schemas/Book' * responses: * 200: * description: The book was successfully created * content: * application/json: * schema: * $ref: '#/components/schemas/Book' * 500: * description: Some server error */  Add a respond snippet for ‘POST’ route, after ‘req.app.db.get’ snippet.  res.send(book);  Add Swagger for ‘PUT’ route, Placed above the ‘router.put’ function.  /** * @swagger * /books/{id}: * put: * summary: Update the book by the id * tags: [Books] * parameters: * - in: path * name: id * schema: * type: string * required: true * description: The book id * requestBody: * required: true * content: * application/json: * schema: * $ref: '#/components/schemas/Book' * responses: * 200: * description: The book was updated * content: * application/json: * schema: * $ref: '#/components/schemas/Book' * 404: * description: The book was not found * 500: * description: Some error happened */  Add Swagger for ‘DELETE’ route, Placed above the ‘router.delete’ function. Error encountered:  router.delete is not working properly. Reason: The router for delete had the wrong syntax router.put on ‘books.js’. Solution: Appended to the following router.delete    /** * @swagger * /books/{id}: * delete: * summary: Remove the book by id * tags: [Books] * parameters: * - in: path * name: id * schema: * type: string * required: true * description: The book id * * responses: * 200: * description: The book was deleted * 404: * description: The book was not found */ Test the server.  node index.js  Should show the following message.  The service is running on port 4000  Accessing via http://localhost:4000/ would show the following message.  Cannot GET /  Accessing via http://localhost:4000/api-docs would show the following. You can also click “Try it out” for each request type, to test the API endpoint.   Committed changes in the repository.  git add . git commit -m \"Part 4: Added Swagger for the rest, final working demo\" git push  Fourth Commit: Added the rest of the Swagger definitions, working demo.  Outro  Encountered a few errors while doing this demo, mainly due to careless syntax errors, but aside from that I think Swagger library is pretty convenient, and can be used to complement Postman for testing APIs. You can find the final Github repo here. I plan on trying to implement a containerize version of this if I get the time to, will update this post if I do.\nRead More:\nNodeJS: Research\n",
  "wordCount" : "1577",
  "inLanguage": "en",
  "datePublished": "2022-05-07T11:41:55+08:00",
  "dateModified": "2022-05-07T11:41:55+08:00",
  "author":{
    "@type": "Person",
    "name": "Kenywil Tiu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.kenywil.com/posts/upskill-1-nodejs-swagger-practical/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kenywil Tiu Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.kenywil.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.kenywil.com" accesskey="h" title="Kenywil Tiu Blog (Alt + H)">Kenywil Tiu Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Upskill 1 (Nodejs &#43; Swagger): Practical
    </h1>
    <div class="post-description">
      Upskill 1: Practical research on backend Javascript framework NodeJS with Swagger
    </div>
    <div class="post-meta"><span title='2022-05-07 11:41:55 +0800 +08'>May 7, 2022</span>&nbsp;·&nbsp;Kenywil Tiu

</div>
  </header> 
  <div class="post-content"><h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<p>       I have done some research on NodeJS with Swagger, and some crash course practical developement. I personally think I learn better by coding step by step, so for this blog I&rsquo;ll follow and break down this Youtube Video called <a href="https://youtu.be/S8kmHtQeflo">&ldquo;NodeJS Swagger API Documentation Tutorial Using Swagger JSDoc&rdquo;</a> By Maksim Ivanov.</p>
<h1 id="steps">Steps<a hidden class="anchor" aria-hidden="true" href="#steps">#</a></h1>
<h2 id="prerequisite">Prerequisite<a hidden class="anchor" aria-hidden="true" href="#prerequisite">#</a></h2>
<ul>
<li>Github account</li>
<li>Git</li>
<li>NodeJS</li>
<li>VSCode</li>
</ul>
<h2 id="github-setup">Github setup<a hidden class="anchor" aria-hidden="true" href="#github-setup">#</a></h2>
<ol>
<li>Created a repository <a href="https://github.com/tiukenywil11/node-express-swagger-crud">here</a> by using GitHub&rsquo;s website UI.</li>
<li>Cloned to my local machine by using the following code</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/tiukenywil11/node-express-swagger-crud.git
</span></span></code></pre></div><ol start="3">
<li>Navigated in and opened the directory on VSCode.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd node-express-swagger-crud
</span></span><span style="display:flex;"><span>code . 
</span></span></code></pre></div><h2 id="initialize-project">Initialize project<a hidden class="anchor" aria-hidden="true" href="#initialize-project">#</a></h2>
<ol>
<li>Initialize Node project.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm init
</span></span></code></pre></div><ol start="2">
<li>Just used default configurations.</li>
<li>Install dependencies</li>
</ol>
<ul>
<li>express: Used as server.</li>
<li>lowdb: Used to store data.</li>
<li>morgan: Output the logs.</li>
<li>nanoid: Create unique ids.</li>
<li>cors: To setup cross origins policy.</li>
<li>swagger-jsdoc: JS docs syntax.</li>
<li>swagger-ui-express: To serve as swagger ui specifications</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install express lowdb@1.0.0 morgan nanoid cors swagger-jsdoc swagger-ui-express
</span></span></code></pre></div><h2 id="create-the-server">Create the server<a hidden class="anchor" aria-hidden="true" href="#create-the-server">#</a></h2>
<ol>
<li>Create and append &lsquo;index.js&rsquo;.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch index.js
</span></span></code></pre></div><ul>
<li>Import the required libraries</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">express</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;express&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cors</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;cors&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">morgan</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;morgan&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">low</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;lowdb&#34;</span>);
</span></span></code></pre></div><ul>
<li>Initialize port to get from the environment variable, or set it to &lsquo;4000&rsquo;.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PORT</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">PORT</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">4000</span>;
</span></span></code></pre></div><ul>
<li>Link data to the file <em>&lsquo;db.json&rsquo;</em></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">FileSync</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;lowdb/adapters/FileSync&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">adapter</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FileSync</span>(<span style="color:#e6db74">&#34;db.json&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">db</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">low</span>(<span style="color:#a6e22e">adapter</span>);
</span></span></code></pre></div><ul>
<li>Add default characters to db.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">defaults</span>({ <span style="color:#a6e22e">books</span><span style="color:#f92672">:</span> []}).<span style="color:#a6e22e">write</span>()
</span></span></code></pre></div><ul>
<li>Initilialize ExpressJS.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>();
</span></span></code></pre></div><ul>
<li>Set ExpressJS DB.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">db</span>;
</span></span></code></pre></div><ul>
<li>Initialize CORS, ExpressJS JSON library, and Morgan.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">cors</span>());
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">express</span>.<span style="color:#a6e22e">json</span>());
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">morgan</span>(<span style="color:#e6db74">&#34;dev&#34;</span>));
</span></span></code></pre></div><ul>
<li>Create server listener.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">PORT</span>, () =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`The service is running on port </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">PORT</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>));
</span></span></code></pre></div><ol start="2">
<li>Test the server.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node index.js
</span></span></code></pre></div><ul>
<li>Should show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>The service is running on port <span style="color:#ae81ff">4000</span>
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/</code> would show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Cannot GET /
</span></span></code></pre></div><p><img loading="lazy" src="/img/upskill-1-practical/1_server-screen.png" alt="server-screen"  />
</p>
<p><strong>Error encountered:</strong></p>
<ul>
<li>lowdb 3.0.0 (ERR_REQUIRE_ESM).
<ul>
<li>Reason: Version incompatible with node^16.13.1</li>
<li>Solution: Downgraded to lowdb^1.0.0</li>
</ul>
</li>
</ul>
<ol start="3">
<li>Committed changes in the repository.</li>
</ol>
<pre tabindex="0"><code>git add .
git commit -m &#34;Part 1: Creating a server&#34;
git push
</code></pre><ul>
<li><a href="https://github.com/tiukenywil11/node-express-swagger-crud/commit/bb43052d8d8287f9f4a4d3001141c715ec35b967">First Commit</a>: Working node-express server.</li>
</ul>
<h2 id="create-routes">Create Routes<a hidden class="anchor" aria-hidden="true" href="#create-routes">#</a></h2>
<ol>
<li>Create &lsquo;routes&rsquo; directory.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir routes
</span></span></code></pre></div><ol start="2">
<li>Create and append&rsquo;routes/books.js&rsquo; file.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch routes/books.js
</span></span></code></pre></div><ul>
<li>Import the required libraries.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">express</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;express&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">router</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>.<span style="color:#a6e22e">Router</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">nanoid</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;nanoid&#34;</span>);
</span></span></code></pre></div><ul>
<li>Initilialize ID length.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">idLength</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;
</span></span></code></pre></div><ul>
<li>Define books route.
<ul>
<li>Note: &lsquo;app.db&rsquo; is initialized on &lsquo;index.js&rsquo;</li>
</ul>
</li>
<li>Create &lsquo;GET&rsquo; books array.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;/&#34;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">books</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;books&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// sends a response which are &#39;books&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">books</span>);
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><ul>
<li>Create &lsquo;GET&rsquo; for a single entry.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;/:id&#34;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;books&#34;</span>).<span style="color:#a6e22e">find</span>({ <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">id</span> }).<span style="color:#a6e22e">value</span>();
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">book</span>);
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><ul>
<li>Create &lsquo;POST&rsquo; to add to the book array.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#34;/&#34;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">nanoid</span>(<span style="color:#a6e22e">idLength</span>),
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// This should be expounded on real projects.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			...<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>
</span></span><span style="display:flex;"><span>		};
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;books&#34;</span>).<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">book</span>).<span style="color:#a6e22e">write</span>();
</span></span><span style="display:flex;"><span>	} <span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span>(<span style="color:#ae81ff">500</span>).<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><ul>
<li>Create &lsquo;PUT&rsquo; to append an entry.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;/:id&#34;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;books&#34;</span>).<span style="color:#a6e22e">find</span>({ <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">id</span> }).<span style="color:#a6e22e">assign</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">write</span>();		
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;books&#34;</span>).<span style="color:#a6e22e">find</span>({ <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span><span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">id</span> }));
</span></span><span style="display:flex;"><span>	} <span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span>(<span style="color:#ae81ff">500</span>).<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><ul>
<li>Create &lsquo;DELETE&rsquo; to remove an entry.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">router</span>.<span style="color:#66d9ef">delete</span>(<span style="color:#e6db74">&#34;/:id&#34;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;books&#34;</span>).<span style="color:#a6e22e">remove</span>({ <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">id</span> }).<span style="color:#a6e22e">write</span>();
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">sendStatus</span>(<span style="color:#ae81ff">200</span>);
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><ul>
<li>Export the routes.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">router</span>;
</span></span></code></pre></div><ol start="3">
<li>Add routes to &lsquo;index.js&rsquo;.</li>
</ol>
<ul>
<li>Import booksRouter. Ideally placed together with other imports.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">booksRouter</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;./routes/books&#39;</span>);
</span></span></code></pre></div><ul>
<li>Initialize books router. Should be placed before &lsquo;app.listen&rsquo;</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#e6db74">&#34;/books&#34;</span>,<span style="color:#a6e22e">booksRouter</span>);
</span></span></code></pre></div><ol start="4">
<li>Added test data to &lsquo;db.json&rsquo; for a quick test.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;books&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Book&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="5">
<li>Test the server.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node index.js
</span></span></code></pre></div><ul>
<li>Should show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>The service is running on port <span style="color:#ae81ff">4000</span>
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/</code> would show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Cannot GET /
</span></span></code></pre></div><p><img loading="lazy" src="/img/upskill-1-practical/1_server-screen.png" alt="server-screen"  />
</p>
<ul>
<li>Accessing via <code>http://localhost:4000/books</code> would show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[{</span><span style="color:#e6db74">&#34;id&#34;</span>:<span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">}]</span>
</span></span></code></pre></div><p><img loading="lazy" src="/img/upskill-1-practical/2_server-screen.png" alt="server-screen-2"  />
</p>
<ol start="5">
<li>Committed changes in the repository.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;Part 2: Create routes&#34;</span>
</span></span><span style="display:flex;"><span>git push
</span></span></code></pre></div><ul>
<li><a href="https://github.com/tiukenywil11/node-express-swagger-crud/commit/2894acd86532b43cc63f8435a1d2cd9447d9d86f">Second Commit</a>: Routes are connected to &lsquo;index.js&rsquo;, test with GET successful.</li>
</ul>
<h2 id="adding-swaggerui">Adding SwaggerUI<a hidden class="anchor" aria-hidden="true" href="#adding-swaggerui">#</a></h2>
<ol>
<li>Append &lsquo;index.js&rsquo;.</li>
</ol>
<ul>
<li>Import swagger. Ideally placed together with other imports.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">swaggerUI</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;swagger-ui-express&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">swaggerJsDoc</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;swagger-jsdoc&#34;</span>);
</span></span></code></pre></div><ul>
<li>Create options for swagger, placed under &lsquo;db.defaults&rsquo;</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">definition</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">openapi</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;3.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">info</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Library API&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">version</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;A simple Express Library API&#34;</span>
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">servers</span><span style="color:#f92672">:</span> [{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;http://localhost:4000&#34;</span>
</span></span><span style="display:flex;"><span>		}],
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">apis</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;./routes/*.js&#34;</span>],
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>Initialize swagger js docs, under swagger options.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">specs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">swaggerJsDoc</span>(<span style="color:#a6e22e">options</span>);
</span></span></code></pre></div><ul>
<li>Use the API docs, placed after instantiation of express to variable app.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#e6db74">&#34;/api-docs&#34;</span>, <span style="color:#a6e22e">swaggerUI</span>.<span style="color:#a6e22e">serve</span>, <span style="color:#a6e22e">swaggerUI</span>.<span style="color:#a6e22e">setup</span>(<span style="color:#a6e22e">specs</span>));
</span></span></code></pre></div><ol start="2">
<li>Test the server.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node index.js
</span></span></code></pre></div><ul>
<li>Should show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>The service is running on port <span style="color:#ae81ff">4000</span>
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/api-docs</code> would show the following.
<img loading="lazy" src="/img/upskill-1-practical/3_server-screen.png" alt="server-screen-3"  />
</li>
</ul>
<ol start="3">
<li>Committed changes in the repository.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;Part 3: Added base Swagger&#34;</span>
</span></span><span style="display:flex;"><span>git push
</span></span></code></pre></div><ul>
<li><a href="https://github.com/tiukenywil11/node-express-swagger-crud/commit/462341d548a051d32534028393842021bbbc196d">Third Commit</a>: Added base Swagger JS.</li>
</ul>
<h2 id="adding-schemas-for-books">Adding Schemas for books<a hidden class="anchor" aria-hidden="true" href="#adding-schemas-for-books">#</a></h2>
<p>Additional Swagger resource regarding component specification can be found <a href="https://swagger.io/docs/specification/components/">here</a></p>
<ol>
<li>Append&rsquo;routes/books.js&rsquo; file.</li>
</ol>
<ul>
<li>Add swagger definition after initializing ID length.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * components:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   schemas:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     Book:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       type: object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       required:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         - title
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         - author
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       properties:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         id:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           type: string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           description: The auto-generated id of the book
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         title:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           type: string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           description: The book title
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         author:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           type: string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           description: The book author
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       example:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         id: 123456
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         title: Book
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         author: Aut H. Or
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p><strong>Error encountered:</strong></p>
<ul>
<li>Swagger &lsquo;component&rsquo; not showing.
<ul>
<li>Reason: Javascript option <code>apis: [&quot;*./routes/*.js&quot;]</code> on &lsquo;index.js&rsquo; is a typo.</li>
<li>Solution: Appended to the following <code>apis: [&quot;./routes/*.js&quot;],</code>
<strong>Notes:</strong></li>
</ul>
</li>
<li>Also appended &lsquo;db.json&rsquo; test data from:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;books&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;book&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>to the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;books&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;12345678&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Book&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;Aut H. Or&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/api-docs</code> would show the following.
<img loading="lazy" src="/img/upskill-1-practical/4_swagger-screen-1.png" alt="server-screen-4"  />

<img loading="lazy" src="/img/upskill-1-practical/5_swagger-screen-2.png" alt="server-screen-5"  />
</li>
<li>Create a swagger tag, to grpup all &lsquo;books&rsquo;/</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span> <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  * tags:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  *   name: Books
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  *   description: The books managing API
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  */</span>
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/api-docs</code> would show the following.
<img loading="lazy" src="/img/upskill-1-practical/6_swagger-screen-3.png" alt="server-screen-6"  />
</li>
<li>Add Swagger for &lsquo;GET&rsquo; route. Placed above the &lsquo;router.get&rsquo;.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * /books:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   get:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     summary: Returns the list of all the books
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     tags: [Books]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     responses:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       200:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The list of the books
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         content:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           application/json:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *             schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *               type: array
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *               items:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *                 $ref: &#39;#/components/schemas/Book&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/api-docs</code> would show the following. You can also click &ldquo;Try it out&rdquo;, to test the API endpoint.
<ul>
<li>These images are similar to the other routes.
<img loading="lazy" src="/img/upskill-1-practical/7_swagger-screen-4.png" alt="server-screen-7"  />

<img loading="lazy" src="/img/upskill-1-practical/8_swagger-screen-5.png" alt="server-screen-8"  />
</li>
</ul>
</li>
<li>Add Swagger for &lsquo;GET&rsquo; for a single entry. Placed above the &lsquo;router.get&rsquo; that gets a single entry.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * /books/{id}:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   get:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     summary: Get the book by id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     tags: [Books]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     parameters:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       - in: path
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         name: id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           type: string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         required: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     responses:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       200:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book description by id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         contens:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           application/json:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *             schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *               $ref: &#39;#/components/schemas/Book&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       404:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book was not found
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><ul>
<li>Add error 404 for &lsquo;GET&rsquo; for single entry. This is placed inside router.get, and after book variable is initialized.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">book</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">sendStatus</span>(<span style="color:#ae81ff">404</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Error Encountered:</strong>
<ul>
<li>&lsquo;GET&rsquo; with {:id} not returning the a value:</li>
<li>Reason: Wrong variable is passed backed to<code>res.send(books);</code></li>
<li>Solution: Appended to the following <code>res.send(book);</code></li>
</ul>
</li>
<li>Add Swagger for &lsquo;POST&rsquo; route. Placed above the &lsquo;router.post&rsquo; function.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * /books:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   post:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     summary: Create a new book
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     tags: [Books]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     requestBody:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       required: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       content:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         application/json:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *             $ref: &#39;#/components/schemas/Book&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     responses:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       200:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book was successfully created
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         content:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           application/json:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *             schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *               $ref: &#39;#/components/schemas/Book&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       500:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: Some server error
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><ul>
<li>Add a respond snippet for &lsquo;POST&rsquo; route, after &lsquo;req.app.db.get&rsquo; snippet.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">book</span>);
</span></span></code></pre></div><ul>
<li>Add Swagger for &lsquo;PUT&rsquo; route, Placed above the &lsquo;router.put&rsquo; function.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * /books/{id}:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *  put:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *    summary: Update the book by the id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *    tags: [Books]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *    parameters:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *      - in: path
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        name: id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *          type: string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        required: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        description: The book id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *    requestBody:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *      required: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *      content:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        application/json:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *          schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *            $ref: &#39;#/components/schemas/Book&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *    responses:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *      200:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        description: The book was updated
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        content:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *          application/json:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *            schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *              $ref: &#39;#/components/schemas/Book&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *      404:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        description: The book was not found
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *      500:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *        description: Some error happened
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><ul>
<li>Add Swagger for &lsquo;DELETE&rsquo; route, Placed above the &lsquo;router.delete&rsquo; function.</li>
<li><strong>Error encountered:</strong>
<ul>
<li>router.delete is not working properly.</li>
<li>Reason: The router for delete had the wrong syntax <code>router.put</code> on &lsquo;books.js&rsquo;.</li>
<li>Solution: Appended to the following <code>router.delete</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @swagger
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * /books/{id}:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   delete:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     summary: Remove the book by id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     tags: [Books]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     parameters:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       - in: path
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         name: id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         schema:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *           type: string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         required: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     responses:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       200:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book was deleted
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *       404:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *         description: The book was not found
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><ol start="5">
<li>Test the server.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node index.js
</span></span></code></pre></div><ul>
<li>Should show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>The service is running on port <span style="color:#ae81ff">4000</span>
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/</code> would show the following message.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Cannot GET /
</span></span></code></pre></div><ul>
<li>Accessing via <code>http://localhost:4000/api-docs</code> would show the following. You can also click &ldquo;Try it out&rdquo; for each request type, to test the API endpoint.
<img loading="lazy" src="/img/upskill-1-practical/9_swagger-screen-6.png" alt="server-screen-9"  />
</li>
</ul>
<ol start="3">
<li>Committed changes in the repository.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;Part 4: Added Swagger for the rest, final working demo&#34;</span>
</span></span><span style="display:flex;"><span>git push
</span></span></code></pre></div><ul>
<li><a href="https://github.com/tiukenywil11/node-express-swagger-crud/commit/d543cde0cae32342791c557fe3486a2fa1b6e7dd">Fourth Commit</a>: Added the rest of the Swagger definitions, working demo.</li>
</ul>
<h1 id="outro">Outro<a hidden class="anchor" aria-hidden="true" href="#outro">#</a></h1>
<p>       Encountered a few errors while doing this demo, mainly due to careless syntax errors, but aside from that I think Swagger library is pretty convenient, and can be used to complement Postman for testing APIs. You can find the final Github repo <a href="https://github.com/tiukenywil11/node-express-swagger-crud">here</a>. I plan on trying to implement a containerize version of this if I get the time to, will update this post if I do.</p>
<p><strong>Read More:</strong><br>
<a href="https://www.kenywil.com/posts/upskill-1-nodejs/">NodeJS: Research</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.kenywil.com/tags/upskill/">upskill</a></li>
      <li><a href="https://www.kenywil.com/tags/full-stack/">full stack</a></li>
      <li><a href="https://www.kenywil.com/tags/nodejs/">nodejs</a></li>
      <li><a href="https://www.kenywil.com/tags/expressjs/">expressjs</a></li>
      <li><a href="https://www.kenywil.com/tags/swagger/">swagger</a></li>
      <li><a href="https://www.kenywil.com/tags/javascript/">javascript</a></li>
      <li><a href="https://www.kenywil.com/tags/github/">github</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.kenywil.com">Kenywil Tiu Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
